\documentclass{standalone}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[french]{babel}
\usepackage{eulervm}
\usepackage{pgfplots}
\pgfplotsset{compat=newest}
\usepgfplotslibrary{colorbrewer}
\usepgfplotslibrary{groupplots}
\usetikzlibrary{matrix, positioning}
\usepackage{pgffor}
\usepackage{amsmath}

\definecolor{falseframe}{RGB}{254,178,76}
\definecolor{correctframe}{RGB}{44,162,95}
\definecolor{falsebit}{RGB}{227,74,51}
\definecolor{correctbit}{RGB}{67,162,202}

\setlength{\textwidth}{146.8mm}


\begin{document}

	\begin{tikzpicture}
		
		\begin{groupplot}[group style={group name=ccsds, group size= 2 by 3, horizontal sep=2cm, vertical sep=1.3cm}, 
					height=0.33\textwidth,  width=0.5\textwidth,
					symbolic x coords={NN, II, NI, IN},
	                xtick=data,
	                %x tick label style= {rotate=45,anchor=north east},
	                ylabel=Oscillations par bit,
	                ymin=0, ymax=21,
	                ybar = 1.5pt, /pgf/bar width=7.5pt,
	                enlarge x limits=0.15, ymajorgrids, grid style={gray!30},legend columns=2]
		\nextgroupplot[legend to name=grouplegend]
		        \addplot[fill=correctframe] table [x=X, y=CF] {../stats/ccsds_2/10-2/moyennes.dat};  
        		\addlegendentry{Trames corrigées à la dernière itération}
                \addplot[fill=falseframe] table [x=X, y=AB] {../stats/ccsds_2/10-2/moyennes.dat}; 
                \addlegendentry{Trames erronées à la dernière itération}
        		\addplot[fill=falsebit] table [x=X, y=EB] {../stats/ccsds_2/10-2/moyennes.dat};  
        		\addlegendentry{Bits erronés dans trames erronées}
        		\addplot[fill=correctbit] table [x=X, y=CB] {../stats/ccsds_2/10-2/moyennes.dat}; 
        		\addlegendentry{Bits justes dans trames erronées} 
        \nextgroupplot[]
        		\addplot[fill=correctframe] table [x=X, y=CF] {../stats/ccsds_2/10-3/moyennes.dat}; 
	            \addplot[fill=falseframe] table [x=X, y=AB] {../stats/ccsds_2/10-3/moyennes.dat}; 
	    		\addplot[fill=falsebit] table [x=X, y=EB] {../stats/ccsds_2/10-3/moyennes.dat}; 
	    		\addplot[fill=correctbit] table [x=X, y=CB] {../stats/ccsds_2/10-3/moyennes.dat}; 
        \nextgroupplot[]
        		\addplot[fill=correctframe] table [x=X, y=CF] {../stats/ccsds_2/10-4/moyennes.dat}; 
                \addplot[fill=falseframe] table [x=X, y=AB] {../stats/ccsds_2/10-4/moyennes.dat}; 
        		\addplot[fill=falsebit] table [x=X, y=EB] {../stats/ccsds_2/10-4/moyennes.dat}; 
        		\addplot[fill=correctbit] table [x=X, y=CB] {../stats/ccsds_2/10-4/moyennes.dat}; 
        \nextgroupplot[]
                \addplot[fill=correctframe] table [x=X, y=CF] {../stats/ccsds_2/10-5/moyennes.dat}; 
                \addplot[fill=falseframe] table [x=X, y=AB] {../stats/ccsds_2/10-5/moyennes.dat}; 
        		\addplot[fill=falsebit] table [x=X, y=EB] {../stats/ccsds_2/10-5/moyennes.dat}; 
        		\addplot[fill=correctbit] table [x=X, y=CB] {../stats/ccsds_2/10-5/moyennes.dat}; 
        \nextgroupplot[]
                \addplot[fill=correctframe] table [x=X, y=CF] {../stats/ccsds_2/10-6/moyennes.dat}; 
                \addplot[fill=falseframe] table [x=X, y=AB] {../stats/ccsds_2/10-6/moyennes.dat}; 
        		\addplot[fill=falsebit] table [x=X, y=EB] {../stats/ccsds_2/10-6/moyennes.dat}; 
        		\addplot[fill=correctbit] table [x=X, y=CB] {../stats/ccsds_2/10-6/moyennes.dat}; 
       	\nextgroupplot[]
                \addplot[fill=correctframe] table [x=X, y=CF] {../stats/ccsds_2/610-7/moyennes.dat}; 
                \addplot[fill=falseframe] table [x=X, y=AB] {../stats/ccsds_2/610-7/moyennes.dat}; 
        		\addplot[fill=falsebit] table [x=X, y=EB] {../stats/ccsds_2/610-7/moyennes.dat}; 
        		\addplot[fill=correctbit] table [x=X, y=CB] {../stats/ccsds_2/610-7/moyennes.dat}; 
		\end{groupplot}

		\node[below = 0.5cm of ccsds c1r1.south] {(a) : FER = $10^{-2}$};
        \node[below = 0.5cm of ccsds c2r1.south] {(b) : FER = $10^{-3}$};
        \node[below = 0.5cm of ccsds c1r2.south] {(c) : FER = $10^{-4}$};
        \node[below = 0.5cm of ccsds c2r2.south] {(d) : FER = $10^{-5}$};
        \node[below = 0.5cm of ccsds c1r3.south] {(d) : FER = $10^{-6}$};
        \node[below = 0.5cm of ccsds c2r3.south] {(d) : FER = $6\times10^{-7}$};

		\node at (ccsds c1r1.north) [anchor=south, xshift=3.8cm, yshift=0.3cm] {\ref{grouplegend}};
	\end{tikzpicture}

\end{document}
