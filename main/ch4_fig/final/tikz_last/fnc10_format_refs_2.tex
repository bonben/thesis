\documentclass{standalone}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[french]{babel}
\usepackage{eulervm}
\usepackage{pgfplots}
\pgfplotsset{compat=newest}
\usepgfplotslibrary{colorbrewer}
\usepgfplotslibrary{groupplots}
\usetikzlibrary{matrix, positioning}
\usepackage{pgffor}
\usepackage{amsmath}

\input{../../colors}

\setlength{\textwidth}{146.8mm}


\begin{document}

\begin{tikzpicture}
    \begin{semilogyaxis}[footnotesize, width=\textwidth, height=0.65\textwidth,    
                    xmin=0.2, xmax=2.6, xtick={0,0.5,...,3},
                    ymax=1,
					xlabel=$E_b/N_0 \text{(dB)}$, ylabel=FER,  
					tick align=outside, tickpos=left,
					grid=both, grid style={gray!30},
					/pgfplots/table/ignore chars={|},
					legend pos=north east
					]

%528
        \addplot[mark=o, Set1-1, semithick                              ]  table [x=Eb/N0, y=FER] {../528/ref.txt};                 \label{528_tc_f}
        \addplot[mark=o, Set1-1, semithick, dashed, mark options={solid}]  table [x=Eb/N0, y=FER] {../528/fnc10_m3.txt};            \label{528_fnc_f}

        \addplot[mark=o, Set1-2, semithick                              ]  table [x=Eb/N0, y=FER] {../fp/528_FP_16_bits_6.3_ref.txt};           \label{528_tc_16b}
        \addplot[mark=o, Set1-2, semithick, dashed, mark options={solid}]  table [x=Eb/N0, y=FER] {../fp/528_FP_16_bits_6.3_FNC10.txt};         \label{528_fnc_16b}

        \addplot[mark=o, Set1-3, semithick                              ]  table [x=Eb/N0, y=FER] {../fp/528_FP_8_bits_5.2_ref.txt};            \label{528_tc_8b_5.2}
        \addplot[mark=o, Set1-3, semithick, dashed, mark options={solid}]  table [x=Eb/N0, y=FER] {../fp/528_FP_8_bits_5.2_FNC10.txt};          \label{528_fnc_8b_5.2}
        
        \addplot[mark=o, Set1-4, semithick                              ]  table [x=Eb/N0, y=FER] {../fp/528_FP_8_bits_5.1_ref.txt};            \label{528_tc_8b_5.1}
        \addplot[mark=o, Set1-4, semithick, dashed, mark options={solid}]  table [x=Eb/N0, y=FER] {../fp/528_FP_8_bits_5.1_FNC10.txt};          \label{528_fnc_8b_5.1}

%2048
        \addplot[mark=triangle, Set1-1, semithick                              ]  table [x=Eb/N0, y=FER] {../2048/ref.txt};                     \label{2048_tc_f}
        \addplot[mark=triangle, Set1-1, semithick, dashed, mark options={solid}]  table [x=Eb/N0, y=FER] {../2048/fnc10_m5.txt};                \label{2048_fnc_f}

        \addplot[mark=triangle, Set1-2, semithick                              ]  table [x=Eb/N0, y=FER] {../fp/2048_FP_16_bits_6.3_ref.txt};   \label{2048_tc_16b}
        \addplot[mark=triangle, Set1-2, semithick, dashed, mark options={solid}]  table [x=Eb/N0, y=FER] {../fp/2048_FP_16_bits_6.3_FNC10.txt}; \label{2048_fnc_16b}

        \addplot[mark=triangle, Set1-3, semithick                              ]  table [x=Eb/N0, y=FER] {../fp/2048_FP_8_bits_5.2_ref.txt};    \label{2048_tc_8b_5.2}
        \addplot[mark=triangle, Set1-3, semithick, dashed, mark options={solid}]  table [x=Eb/N0, y=FER] {../fp/2048_FP_8_bits_5.2_FNC10.txt};  \label{2048_fnc_8b_5.2}
        
        \addplot[mark=triangle, Set1-4, semithick                              ]  table [x=Eb/N0, y=FER] {../fp/2048_FP_8_bits_5.1_ref.txt};    \label{2048_tc_8b_5.1}
        \addplot[mark=triangle, Set1-4, semithick, dashed, mark options={solid}]  table [x=Eb/N0, y=FER] {../fp/2048_FP_8_bits_5.1_FNC10.txt};  \label{2048_fnc_8b_5.1}



%6144
        \addplot[mark=square, Set1-1, semithick                              ]  table [x=Eb/N0, y=FER] {../6144/ref.txt};                       \label{6144_tc_f}
        \addplot[mark=square, Set1-1, semithick, dashed, mark options={solid}]  table [x=Eb/N0, y=FER] {../6144/fnc10_m5.txt};                  \label{6144_fnc_f}

        \addplot[mark=square, Set1-2, semithick                              ]  table [x=Eb/N0, y=FER] {../fp/6144_FP_16_bits_6.3_ref.txt};     \label{6144_tc_16b}
        \addplot[mark=square, Set1-2, semithick, dashed, mark options={solid}]  table [x=Eb/N0, y=FER] {../fp/6144_FP_16_bits_6.3_FNC10.txt};   \label{6144_fnc_16b}

        \addplot[mark=square, Set1-3, semithick                              ]  table [x=Eb/N0, y=FER] {../fp/6144_FP_8_bits_5.2_ref.txt};      \label{6144_tc_8b_5.2}
        \addplot[mark=square, Set1-3, semithick, dashed, mark options={solid}]  table [x=Eb/N0, y=FER] {../fp/6144_FP_8_bits_5.2_FNC10.txt};    \label{6144_fnc_8b_5.2}
        
        \addplot[mark=square, Set1-4, semithick                              ]  table [x=Eb/N0, y=FER] {../fp/6144_FP_8_bits_5.1_ref.txt};      \label{6144_tc_8b_5.1}
        \addplot[mark=square, Set1-4, semithick, dashed, mark options={solid}]  table [x=Eb/N0, y=FER] {../fp/6144_FP_8_bits_5.1_FNC10.txt};    \label{6144_fnc_8b_5.1}


        \coordinate (legend2) at (axis description cs:0.5,1.2);

    \end{semilogyaxis}

    % \matrix [
    %     draw,
    %     matrix of nodes,
    %     anchor=north east,
    %     fill=white,
    %     nodes in empty cells
    % ] at (legend2) {
    %              &                      & \small{\textbf{Flottant}}     & \small{\textbf{16 bits}}    & \small{\textbf{8 bits 5.1}}    & \small{\textbf{8 bits 5.2}}    \\
    %              & \hspace*{-1ex}\small{K}=528  & \ref{528_tc_float}   & \ref{528_tc_16b}   & \ref{528_tc_8b_5.1}   & \ref{528_tc_8b_5.2}   \\
    % \textbf{TC}  & \small{K}=2048 & \ref{2048_tc_float}  & \ref{2048_tc_16b}  & \ref{2048_tc_8b_5.1}  & \ref{2048_tc_8b_5.2}  \\
    %              & \small{K}=6144 & \ref{6144_tc_float}  & \ref{6144_tc_16b}  & \ref{6144_tc_8b_5.1}  & \ref{6144_tc_8b_5.2}  \\
    %              & \hspace*{-1ex}\small{K}=528  & \ref{528_fnc_float}  & \ref{528_fnc_16b}  & \ref{528_fnc_8b_5.1}  & \ref{528_fnc_8b_5.2}  \\
    % \textbf{FNC} & \small{K}=2048 & \ref{2048_fnc_float} & \ref{2048_fnc_16b} & \ref{2048_fnc_8b_5.1} & \ref{2048_fnc_8b_5.2} \\
    %              & \small{K}=6144 & \ref{6144_fnc_float} & \ref{6144_fnc_16b} & \ref{6144_fnc_8b_5.1} & \ref{6144_fnc_8b_5.2} \\
    % };

        \matrix [
        draw,
        matrix of nodes,
        anchor=center,
        fill=white,
        nodes in empty cells
    ] at (legend2) {
      \small{TC/FNC}                       & \small{\textbf{Flottant}}        & \small{\textbf{16 bits (C : $Q_{6.3}$)}}         & \small{\textbf{8 bits (C : $Q_{5.2}$)}}              & \small{\textbf{8 bits (C : $Q_{5.1}$)}}                \\
                             %& \scriptsize{~~TC/FNC}            & \scriptsize{~~TC/FNC}                & \scriptsize{~~TC/FNC}                      & \scriptsize{~~TC/FNC}                      \\
\hspace*{-1ex}\small{K}=528  &  \ref{528_tc_f}/\ref{528_fnc_f}  &  \ref{528_tc_16b}/\ref{528_fnc_16b}  &  \ref{528_tc_8b_5.2}/\ref{528_fnc_8b_5.2}  &  \ref{528_tc_8b_5.1}/\ref{528_fnc_8b_5.1}  \\
              \small{K}=2048 & \ref{2048_tc_f}/\ref{2048_fnc_f} & \ref{2048_tc_16b}/\ref{2048_fnc_16b} & \ref{2048_tc_8b_5.2}/\ref{2048_fnc_8b_5.2} & \ref{2048_tc_8b_5.1}/\ref{2048_fnc_8b_5.1} \\
              \small{K}=6144 & \ref{6144_tc_f}/\ref{6144_fnc_f} & \ref{6144_tc_16b}/\ref{6144_fnc_16b} & \ref{6144_tc_8b_5.2}/\ref{6144_fnc_8b_5.2} & \ref{6144_tc_8b_5.1}/\ref{6144_fnc_8b_5.1} \\
    };
\end{tikzpicture}
\end{document}
