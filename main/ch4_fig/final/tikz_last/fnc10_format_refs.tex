\documentclass{standalone}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[french]{babel}
\usepackage{eulervm}
\usepackage{pgfplots}
\pgfplotsset{compat=newest}
\usepgfplotslibrary{colorbrewer}
\usepgfplotslibrary{groupplots}
\usetikzlibrary{matrix, positioning}
\usepackage{pgffor}
\usepackage{amsmath}

\input{../../colors}

\setlength{\textwidth}{146.8mm}


\begin{document}

\begin{tikzpicture}
    \begin{semilogyaxis}[footnotesize, width=\textwidth, height=0.65\textwidth,    
                    xmin=0.2, xmax=2.6, xtick={0,0.5,...,3},
                    ymax=1,
					xlabel=$E_b/N_0 \text{(dB)}$, ylabel=FER,  
					tick align=outside, tickpos=left,
					grid=both, grid style={gray!30},
					/pgfplots/table/ignore chars={|},
					legend pos=north east
					]

        \addplot[mark=o, Set1-1, semithick                              ]  table [x=Eb/N0, y=FER] {../528/ref.txt};         \label{528_tc_float}
        \addplot[mark=o, Set1-1, semithick, dashed, mark options={solid}]  table [x=Eb/N0, y=FER] {../528/fnc10_m3.txt};    \label{528_fnc_float}
        
        \addplot[mark=o, Set1-2, semithick                              ]  table [x=Eb/N0, y=FER] {../prec/528_FP_16_bits_6.3_ref.txt}; \label{528_tc_16b}
       % \addplot[mark=o, Set1-2, semithick                              ]  table [x=Eb/N0, y=FER] {../prec/ref_16.txt};     \label{tc_16b}
       % \addplot[mark=o, Set1-2, semithick, dashed, mark options={solid}]  table [x=Eb/N0, y=FER] {../prec/fnc_16_16b.txt}; \label{fnc_16b}
        \addplot[mark=o, Set1-2, semithick, dashed, mark options={solid}]  table [x=Eb/N0, y=FER] {../prec/528_FP_16_bits_6.3_FNC10.txt}; \label{528_fnc_16b}
        % \addplot[mark=o, Set1-3, semithick                              ]  table [x=Eb/N0, y=FER] {../prec/ref_8.txt};      \label{tc_8b}
        % \addplot[mark=o, Set1-3, semithick, dashed, mark options={solid}]  table [x=Eb/N0, y=FER] {../prec/fnc_8_8b.txt};   \label{fnc_8b}

        \addplot[mark=triangle, Set1-1, semithick                              ]  table [x=Eb/N0, y=FER] {../2048/ref.txt};             \label{2048_tc_float}
        \addplot[mark=triangle, Set1-1, semithick, dashed, mark options={solid}]  table [x=Eb/N0, y=FER] {../2048/fnc10_m5.txt};        \label{2048_fnc_float}

        \addplot[mark=triangle, Set1-2, semithick                              ]  table [x=Eb/N0, y=FER] {../prec/2048_FP_16_bits_6.3_ref.txt};   \label{2048_tc_16b}  
        \addplot[mark=triangle, Set1-2, semithick, dashed, mark options={solid}]  table [x=Eb/N0, y=FER] {../prec/2048_FP_16_bits_6.3_FNC10.txt}; \label{2048_fnc_16b}

        % \addplot[mark=triangle, Set1-3, semithick                              ]  table [x=Eb/N0, y=FER] {../prec/2048_FP_8_bits_5.2_ref.txt};     
        % \addplot[mark=triangle, Set1-3, semithick, dashed, mark options={solid}]  table [x=Eb/N0, y=FER] {../prec/2048_FP_8_bits_5.2_FNC10.txt}; 

        % \addplot[mark=triangle, Set1-4, semithick                              ]  table [x=Eb/N0, y=FER] {../prec/2048_FP_8_bits_5.1_ref.txt};     
        % \addplot[mark=triangle, Set1-4, semithick, dashed, mark options={solid}]  table [x=Eb/N0, y=FER] {../prec/2048_FP_8_bits_5.1_FNC10.txt}; 

        \addplot[mark=square, Set1-1, semithick                              ]  table [x=Eb/N0, y=FER] {../6144/ref.txt}; \label{6144_tc_float}
        \addplot[mark=square, Set1-1, semithick, dashed, mark options={solid}]  table [x=Eb/N0, y=FER] {../6144/fnc10_m5.txt}; \label{6144_fnc_float}

        \addplot[mark=square, Set1-2, semithick                              ]  table [x=Eb/N0, y=FER] {../prec/6144_FP_16_bits_6.3_ref.txt};     \label{6144_tc_16b}

        \addplot[mark=square, Set1-2, semithick, dashed, mark options={solid}]  table [x=Eb/N0, y=FER] {../prec/6144_FP_16_bits_6.3_FNC10.txt}; \label{6144_fnc_16b}

        % \addplot[mark=square, Set1-3, semithick                              ]  table [x=Eb/N0, y=FER] {../prec/6144_FP_8_bits_5.2_ref.txt};     
        % \addplot[mark=square, Set1-3, semithick, dashed, mark options={solid}]  table [x=Eb/N0, y=FER] {../prec/6144_FP_8_bits_5.2_FNC10.txt}; 

        % \addplot[mark=square, Set1-4, semithick                              ]  table [x=Eb/N0, y=FER] {../prec/6144_FP_8_bits_5.1_ref.txt};     
        % \addplot[mark=square, Set1-4, semithick, dashed, mark options={solid}]  table [x=Eb/N0, y=FER] {../prec/6144_FP_8_bits_5.1_FNC10.txt}; 

         \coordinate (legend2) at (axis description cs:0.99,0.98);

    \end{semilogyaxis}

    \matrix [
        draw,
        matrix of nodes,
        anchor=north east,
        fill=white,
        nodes in empty cells
    ] at (legend2) {
                       & \small{Flottant}    &                      & \small{16} bits   &                    \\
                       & \small{TC}          & \small{FNC}          & \small{TC}        & \small{FNC}        \\
        \small{K}=528  & \ref{528_tc_float}  & \ref{528_fnc_float}  & \ref{528_tc_16b}  & \ref{528_fnc_16b}  \\
        \small{K}=2048 & \ref{2048_tc_float} & \ref{2048_fnc_float} & \ref{2048_tc_16b} & \ref{2048_fnc_16b} \\
        \small{K}=6144 & \ref{6144_tc_float} & \ref{6144_fnc_float} & \ref{6144_tc_16b} & \ref{6144_fnc_16b} \\
    };
\end{tikzpicture}
\end{document}
