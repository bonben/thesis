\documentclass{standalone}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[french]{babel}
\usepackage{eulervm}
\usepackage{pgfplots}
\pgfplotsset{compat=newest}
\usetikzlibrary{decorations.pathmorphing}
\usepgfplotslibrary{colorbrewer}
\usepgfplotslibrary{groupplots}
\usetikzlibrary{matrix, positioning, patterns}
\usepackage{pgffor}
\usepackage{amsmath}

\setlength{\textwidth}{146.8mm}
\input{../../colors}

\begin{document}

\begin{tikzpicture}
		
		\begin{groupplot}[group style={group name=be, group size= 2 by 3, horizontal sep=1.7cm, vertical sep=2.5cm}, 
					height=0.4\textwidth,  width=0.7\textwidth,
					grid=both, grid style={gray!30},
					colorbrewer cycle list=Spectral,
					ybar interval=1pt, %/pgf/bar width=3pt,
					xmin=1, xmax=22, xtick={1,2,...,22}, ymin=0,  ytick={0,10,...,45}, ymax=45, 
					grid=both, grid style={dashed, gray!50},  legend style={at={(0.5,1.03)},anchor=south},legend columns=3,
					xticklabels={1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,>20},
					 x tick label style={shift={(axis cs:1.25,0)},anchor=east,rotate=60},
					 ylabel=PDF (\%),
					     restrict y to domain*=0:45, % Cut values off at 14
    visualization depends on=rawy\as\rawy, % Save the unclipped values
    after end axis/.code={ % Draw line indicating break
            \draw [ultra thick, white, decoration={snake, amplitude=1pt}, decorate] (rel axis cs:0,0.95) -- (rel axis cs:1,0.95);
        },
    axis lines*=left,
    clip=false
					 ]
	 
		 \nextgroupplot[legend entries = {0.8dB, 1.6dB, 2.4dB}]
		 \addplot[draw=Paired-1, fill=Paired-1!50, postaction={pattern color = black!80,pattern=north west lines}] table [x=Occ, y expr=\thisrowno{3}/5] {../dat/528.dat};
		 \addplot[draw=Paired-3, fill=Paired-3!50, postaction={pattern color = black!80,pattern=north east lines}] table [x=Occ, y expr=\thisrowno{5}/5] {../dat/528.dat};
		 \addplot[draw=Paired-5, fill=Paired-5!50, postaction={pattern color = black!80,pattern=crosshatch dots }] table [x=Occ, y expr=\thisrowno{7}/5] {../dat/528.dat};
		 \node[rotate=60] at ($(axis cs:22.1,49)+(0,0)$) {\small \textcolor{Paired-1}{74}};

		 \nextgroupplot[legend entries = {1.1dB, 1.3dB, 1.5dB}]
		 \addplot[draw=Paired-1, fill=Paired-1!50, postaction={pattern color = black!80,pattern=north west lines}] table [x=X, y expr=\thisrowno{6}/5] {../dat/1024.dat};
		 \addplot[draw=Paired-3, fill=Paired-3!50, postaction={pattern color = black!80,pattern=north east lines}] table [x=X, y expr=\thisrowno{7}/5] {../dat/1024.dat};
		 \addplot[draw=Paired-5, fill=Paired-5!50, postaction={pattern color = black!80,pattern=crosshatch dots }] table [x=X, y expr=\thisrowno{8}/5] {../dat/1024.dat};
		 \node[rotate=60] at ($(axis cs:22.1,49)+(0,0)$) {\small \textcolor{Paired-1}{52}};

		 \nextgroupplot[legend entries = {0.9dB, 1.1dB, 1.3dB}]
		 \addplot[draw=Paired-1, fill=Paired-1!50, postaction={pattern color = black!80,pattern=north west lines}] table [x=X, y expr=\thisrowno{5}/5] {../dat/1504.dat};
		 \addplot[draw=Paired-3, fill=Paired-3!50, postaction={pattern color = black!80,pattern=north east lines}] table [x=X, y expr=\thisrowno{6}/5] {../dat/1504.dat};
		 \addplot[draw=Paired-5, fill=Paired-5!50, postaction={pattern color = black!80,pattern=crosshatch dots }] table [x=X, y expr=\thisrowno{7}/5] {../dat/1504.dat};
 		 \node[rotate=60] at ($(axis cs:22.1,49)+(0,0)$) {\small \textcolor{Paired-1}{45}};


		 \nextgroupplot[legend entries = {0.9dB, 1.1dB, 1.3dB}]
		 \addplot[draw=Paired-1, fill=Paired-1!50, postaction={pattern color = black!80,pattern=north west lines}] table [x=X, y expr=\thisrowno{5}/5] {../dat/2048.dat};
		 \addplot[draw=Paired-3, fill=Paired-3!50, postaction={pattern color = black!80,pattern=north east lines}] table [x=X, y expr=\thisrowno{6}/5] {../dat/2048.dat};
		 \addplot[draw=Paired-5, fill=Paired-5!50, postaction={pattern color = black!80,pattern=crosshatch dots }] table [x=X, y expr=\thisrowno{7}/5] {../dat/2048.dat};

		 \nextgroupplot[legend entries = {0.4dB, 0.6dB, 0.8dB}]
		 \addplot[draw=Paired-1, fill=Paired-1!50, postaction={pattern color = black!80,pattern=north west lines}] table [x=X, y expr=\thisrowno{3}/5] {../dat/6144.dat};
		 \addplot[draw=Paired-3, fill=Paired-3!50, postaction={pattern color = black!80,pattern=north east lines}] table [x=X, y expr=\thisrowno{4}/5] {../dat/6144.dat};
		 \addplot[draw=Paired-5, fill=Paired-5!50, postaction={pattern color = black!80,pattern=crosshatch dots }] table [x=X, y expr=\thisrowno{5}/5] {../dat/6144.dat};
		 \node[rotate=60] at ($(axis cs:22.1,49)+(0,0)$) {\small \textcolor{Paired-1}{53}};
 		 \node[rotate=60] at ($(axis cs:3.75,49)+(0,0)$) {\small \textcolor{Paired-5}{64}};


		% \nextgroupplot[legend entries = {1.1dB, 1.3dB, 1.5dB}]
		% \addplot[draw=Paired-1, fill=Paired-1!50, postaction={pattern color = black!80,pattern=north west lines}] table [x=X, y expr=\thisrowno{6}/5] {../dat/ccsds.dat};
		% \addplot[draw=Paired-3, fill=Paired-3!50, postaction={pattern color = black!80,pattern=north east lines}] table [x=X, y expr=\thisrowno{7}/5] {../dat/ccsds.dat};
		% \addplot[draw=Paired-5, fill=Paired-5!50, postaction={pattern color = black!80,pattern=crosshatch dots }] table [x=X, y expr=\thisrowno{8}/5] {../dat/ccsds.dat};
		% \node[rotate=60] at ($(axis cs:22.1,49)+(0,0)$) {\small \textcolor{Paired-1}{59}};
		% \node[rotate=60] at ($(axis cs:7.4,49)+(0,0)$) {\small \textcolor{Paired-3}{54}};
 		% \node[rotate=60] at ($(axis cs:8.4,43)+(0,0)$) {\small \textcolor{Paired-5}{84}};
		\nextgroupplot[legend entries = {1.1dB, 1.2dB, 1.3dB}]
		%\addplot[draw=Paired-1, fill=Paired-1!50, postaction={pattern color = black!80,pattern=north west lines}] table [x=X, y expr=\thisrowno{1}] {../dat/ccsds_my.dat};
		\addplot[draw=Paired-1, fill=Paired-1!50, postaction={pattern color = black!80,pattern=north west lines}] table [x=X, y expr=\thisrowno{2}] {../dat/ccsds_my.dat};
		\addplot[draw=Paired-3, fill=Paired-3!50, postaction={pattern color = black!80,pattern=north east lines}] table [x=X, y expr=\thisrowno{3}] {../dat/ccsds_my.dat};
		\addplot[draw=Paired-5, fill=Paired-5!50, postaction={pattern color = black!80,pattern=crosshatch dots}] table [x=X, y expr=\thisrowno{4}*1.15] {../dat/ccsds_my.dat};
		\node[rotate=60] at ($(axis cs:22.1,49)+(0,0)$) {\small \textcolor{Paired-1}{62}};
				
\end{groupplot}
		\node[below = 0.8cm of be c1r1.south] {(a) : LTE K=528};
        \node[below = 0.8cm of be c2r1.south] {(b) : LTE K=1024};
		\node[below = 0.8cm of be c1r2.south] {(c) : LTE K=1504};
        \node[below = 0.8cm of be c2r2.south] {(d) : LTE K=2048};
        \node[below = 0.8cm of be c1r3.south] {(e) : LTE K=6144};
        \node[below = 0.8cm of be c2r3.south] {(f) : CCSDS K=1784};
\end{tikzpicture}

\end{document}
